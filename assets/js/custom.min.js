"use strict";var bezpekaModule,bezpekaValidation;!function(n){n(window).scroll(function(){69<n(this).scrollTop()?(n("#scroller").addClass("show"),n("#widjet-phone").addClass("show")):(n("#scroller").removeClass("show"),n("#widjet-phone").removeClass("show"))}),n("#scroller").click(function(){return n("body,html").animate({scrollTop:0},1e3),!1}),bezpekaModule=function(){n(".type__container").on("click",function(){n(".hint").fadeIn(),n(".calc").addClass("overlay")}),n(".hint__close").on("click",function(){n(".hint").fadeOut(),n(".calc").removeClass("overlay"),a.$calc_slider.slick("slickNext")}),n(document).mouseup(function(t){0===n(".hint").has(t.target).length&&(n(".hint").fadeOut(),n(".calc").removeClass("overlay"))});var a={$calc_section:n("section.calc"),$calc_slider:n(".bc-slider"),$taryf_slider:n(".taryf"),$progress_bar:n(".calc__progress"),$progress_bar_label:n(".calc__progress-text span"),$next_btn:n(".bc-slide").find(".bc-btn--next"),$prev_btn:n(".bc-slide").find(".bc-btn--prev"),$logo_slider:n(".bc-logos__slider")},e={$rooms:n(".rooms__container"),$version:n(".version__container"),$type:n(".type__item--step"),$taryf:n(".taryf__item"),$city:n(".city__container--step"),$city_input_text:n("#city-input-text"),$option:n(".option__item"),$prize:n(".prize__item")};function i(t){0<t.length&&n("html, body").animate({scrollTop:t.offset().top-200},500,"swing")}return{init:function(){this.choiceNext(),this.quizHandler(),this.sliderCity(),this.validationInput(),this.modalStart(),this.ajaxHandler(),this.logosSlider(),this.swipeDown(),this.scrollHandler()},swipeDown:function(){n("a[data-scroll]").click(function(){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){var t=n(this.hash);if((t=t.length?t:n("[name="+this.hash.slice(1)+"]")).length)return n("html, body").animate({scrollTop:t.offset().top+0},1e3,"swing"),!1}})},sliderCity:function(){a.$next_btn.attr("disabled",!0),a.$prev_btn.on("click",function(){n(this).parent().siblings(".i").find("input[type='radio']").attr("checked",!1),a.$next_btn.attr("disabled",!1)})},choiceNext:function(){function t(){setTimeout(function(){a.$calc_slider.slick("slickNext")},300)}e.$rooms.on("click",t),e.$version.on("click",t),e.$type.on("click",t),e.$taryf.on("click",t),e.$city.on("click",t),e.$option.on("click",t),e.$prize.on("click",t)},modalStart:function(){n(".bc-btn--border").on("click",function(t){t.preventDefault(),t.stopPropagation(),n("#social__modal__container").toggleClass("hide-modal-recall")}),n("#widjet-phone").on("click",function(t){t.preventDefault(),n("#social__modal__container").removeClass("hide-modal-recall")}),n(".bc-btn--taryf").on("click",function(t){t.preventDefault(),t.stopPropagation(),n("#social__modal__container").toggleClass("hide-modal-recall")}),n("#social__modal__container").on("click",function(t){t.stopPropagation(),n("#social__modal__container").addClass("hide-modal-recall"),n("#thanks__modal__container").addClass("hide-modal-recall")}),n("#close__social__modal__container").on("click",function(t){t.preventDefault(),n("#social__modal__container").addClass("hide-modal-recall")}),n(".social__modal__wrap").on("click",function(t){t.stopPropagation()})},scrollHandler:function(){},validationInput:function(){n('input[name="phone"]').inputmask({mask:"(099) 999-99-99"}),n('input[name="phone"]').on("change keyup keydown",function(){var t=n(this).val();"0"==(""+t)[2]&&(n(this).val(" "),n(this).blur().focus()),n('button[type="submit"]').attr("disabled","disabled"),new RegExp("_$").test(t)?n(this).addClass("error-phone"):(n(this).removeClass("error-phone"),n('input[type="submit"]').removeAttr("disabled"),n('button[type="submit"]').removeAttr("disabled").find(".shine-button__el").addClass("animate"))})},ajaxHandler:function(){n("#social__modal__container, .calc").on("submit","form",function(t){t.preventDefault();var e=n(this).serializeArray();return n.ajax({type:"POST",url:"/wp-admin/admin-ajax.php",data:e,beforeSend:function(){n('button[type="submit"]').attr("disabled",!0),setTimeout(function(){n('button[type="submit"]').attr("disabled",!1)},1750)},success:function(t){n("#social__modal__container").addClass("hide-modal-recall"),n("#thanks__modal__container").removeClass("hide-modal-recall"),setTimeout(function(){n("#thanks__modal__container").addClass("hide-modal-recall")},2100),setTimeout(function(){"rooms-one"==e[1].name&&(location.href="https://bezpeka.club/")},2200)},error:function(t){console.log("error: "+e)}}),!1})},logosSlider:function(){if(0<a.$logo_slider.length)a.$logo_slider.slick({dots:!0,prevArrow:!1,nextArrow:!1,loop:!0,speed:500,cssEase:"ease-in-out",slidesToShow:7,autoplay:!0,slidesToScroll:1,responsive:[{breakpoint:992,settings:{slidesToShow:5,dots:!1}},{breakpoint:768,settings:{slidesToShow:3,dots:!1}},{breakpoint:568,settings:{slidesToShow:1,dots:!1}}]})},quizHandler:function(){a.$calc_section.length<0||(a.$calc_slider.on("init",function(){a.$next_btn.attr("disabled",!0)}),a.$calc_slider.slick({prevArrow:!1,nextArrow:!1,infinite:!1,loop:!1,adaptiveHeight:!0,swipe:!1,fade:!0,touchMove:!1,draggable:!1}),a.$calc_slider.on("beforeChange",function(){a.$next_btn.attr("disabled",!0)}),this.progressHandler(a.$calc_slider),a.$next_btn.on("click",function(t){bezpekaModule.prevNextHandler(a.$calc_slider,"next",t),i(n("#b_step_slider"))}),a.$prev_btn.on("click",function(t){bezpekaModule.prevNextHandler(a.$calc_slider,"prev",t),i(n("#b_step_slider"))}),a.$taryf_slider.slick({slidesToShow:4,slidesToScroll:1,loop:!1,infinite:!1,nextArrow:'<button type="button" class="btn taryf__arrow-right"></button>',prevArrow:'<button type="button" class="btn taryf__arrow-left"></button>',responsive:[{breakpoint:1200,settings:{slidesToShow:3}},{breakpoint:991,settings:{slidesToShow:2}},{breakpoint:768,settings:{slidesToShow:1}}]}),n(".f-radio-taryf").on("change",function(){n("#city-15").is(":checked")?n("#city-input-text").attr("name","city-five"):(n("#city-input-text").val(""),n("#city-input-text").attr("name",!1));var t=n(".bc-slide").map(function(){return n(this).find(".f-radio-taryf:checked").map(function(){return n(this).data("class")}).get().join("")}).get().filter(function(t){return""!==t}).join("");a.$taryf_slider.slick("slickUnfilter"),a.$taryf_slider.slick("slickFilter",t),n("#city-input-text").on("click",function(){n("#city-15").trigger("click"),n("#city-input-text").attr("disabled",!1),n(".btn-5").attr("disabled",!1)}),n(this).closest(".slider").find(".bc-btn--next").attr("disabled",!1)}))},progressHandler:function(t){t.on("beforeChange",function(t,e,i,n){var o=n/(e.slideCount-1)*100;a.$progress_bar_label.text(Math.floor(o)+"%"),a.$progress_bar.css({"background-size":o+"% 100%"}).attr("aria-valuenow",o)})},prevNextHandler:function(t,e,i){i.preventDefault(),"next"===e?t.slick("slickNext"):"prev"===e&&(t.slick("slickPrev"),n(this).siblings("button[type='button']").attr("disabled",!1))}}}()}(jQuery),jQuery(document).ready(function(){bezpekaModule.init()});